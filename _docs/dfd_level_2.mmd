flowchart TD
    %% Entities
    Guest["Guest"]
    Telegram["Telegram Service"]

    %% Processes
    P3_1(("3.1 Validasi Input"))
    P3_2(("3.2 Simpan RSVP"))
    P3_3(("3.3 Update Data Tamu"))
    P3_4(("3.4 Kirim Notifikasi"))
    P3_5(("3.5 Simpan Ucapan"))

    %% Data Stores
    D2[("D2 Guest Inv")]
    D3[("D3 RSVPs")]
    D4[("D4 Wishes")]

    %% Flow RSVP
    Guest -- "Data RSVP" --> P3_1
    P3_1 -- "Data Valid" --> P3_2
    P3_2 -- "Insert Record" --> D3
    P3_2 -- "Update Trigger" --> P3_3
    P3_3 -- "Set has_rsvp=1" --> D2
    P3_2 -- "Notif Trigger" --> P3_4
    P3_4 -- "Send Message" --> Telegram

    %% Flow Wish
    Guest -- "Data Ucapan" --> P3_5
    P3_5 -- "Insert Record" --> D4

    %% Styling
    style P3_1 fill:#fff9c4,stroke:#fbc02d
    style P3_2 fill:#fff9c4,stroke:#fbc02d
    style P3_3 fill:#fff9c4,stroke:#fbc02d
    style P3_4 fill:#fff9c4,stroke:#fbc02d
    style P3_5 fill:#fff9c4,stroke:#fbc02d
